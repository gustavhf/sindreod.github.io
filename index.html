<!DOCTYPE html>
<html>
<head> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>

    <!-- Lib libraries -->
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script> <!-- Leaflet osv basemap -->

    <script src="js/leaflet.ajax.min.js"></script> <!-- Read external GeoJSON-files -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> <!-- jQuery API -->
    <link rel="stylesheet" href="index.css"/>
</head>

<body>
<!-- Side navigation -->
<div class="sidenav">
    <img src="PokeGIS.png" alt="PokÃ©GIS">
    <a href="#">About</a>

</div>

<!-- Page content -->
<div class="main">
    <div id="map"></div>
</div>
 <script type="text/javascript">

     // Load data
     var land = $.ajax({
         url: 'data/land2.geojson',
         dataType: "json",
         success: console.log("Land data successfully loaded"),
         error: function(xhr) {
             alert(xhr.statusText);
         }
     });

     var water = $.ajax({
         url: 'data/water2.geojson',
         dataType: "json",
         success: console.log("Water data successfully loaded"),
         error: function(xhr) {
             alert(xhr.statusText);
         }
     });

     var ocean = $.ajax({
         url: 'data/Ocean.geojson',
         dataType: "json",
         success: console.log("Ocean data successfully loaded"),
         error: function(xhr) {
             alert(xhr.statusText);
         }
     });

     $.when(land, water, ocean).done(function() {
         // Set background map
         var map = L.map('map', {
             minZoom: 12,
             maxZoom: 20
         }).setView([63.366288, 10.4308315]);
         map.minZoom = 12;

         //var control = L.control.layers();
         var startBounds = L.latLngBounds([
             [63.381063, 10.393066],
             [63.351513, 10.468597]
         ]);

         var worldBounds = L.latLngBounds([
             [63.430860, 10.055237],
             [63.171095, 10.784454]
         ]);

         map.fitBounds(startBounds);
         map.on('drag', function() {
             map.panInsideBounds(worldBounds, { animate: true });
         });

         var mWater = L.geoJSON(water.repsonseJSON, {
             style: function (feature) {
                 return {"fill":true,
                     "fillColor": "#0000ff",
                     "fillOpacity": 1,
                     "stroke": false
                 };
             }
         }).bindPopup(function (layer) {
             return "This is a water"
         }).addTo(map);

         var mLand = L.geoJSON(land.responseJSON, {
             style: function (feature) {
                return {"fill": true,
                        "fillColor": "#1ec595",
                        "fillOpacity": 1,
                        "stroke": true,
                        "color": "#d09064",
                        "weight": 1
                };
             }
         }).bindPopup(function (layer) {
             return "Part of: " + layer.feature.properties.description +
                 "<br>" + "Color: " + layer.feature.properties.fill;
         }).addTo(map);

         var mOcean = L.geoJSON(ocean.responseJSON, {
             style: function (feature) {
                return {"fill": true,
                        "fillColor": "#00bcdc",
                        "fillOpacity": 1,
                        "stroke": false
                };
             }
         }).bindPopup(function (layer) {
             return "The vast ocean"
         }).addTo(map);

         map.on('click', function(e) {
            console.log("Lat: " + e.latlng.lat + "\nLon: " + e.latlng.lng);
         });

         map.on('zoomend', function() {
             console.log("Zoom level: " + map.getZoom());
         })
     });

 </script>

</body>
</html>