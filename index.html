<!DOCTYPE html>
<html>
<head> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>

    <!-- Lib libraries -->
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script> <!-- Leaflet osv basemap -->

    <script src="js/leaflet.ajax.min.js"></script> <!-- Read external GeoJSON-files -->

    <link rel="stylesheet" href="index.css"/>
</head>

<body>
<!-- Side navigation -->
<div class="sidenav">
    <input type="file" id="files" name="files[]" multiple />
    <output id="fileList"></output>

    <a href="#">About</a>
<!--    <a href="#">Services</a>
    <a href="#">Clients</a>
    <a href="#">Contact</a> -->
</div>

<!-- Page content -->
<div class="main">
    <div id="mapid"></div>
</div>
 <script type="text/javascript">

     // Check for the various File API support.
     if (window.File && window.FileReader && window.FileList && window.Blob) {
         //alert('Great success! All the File APIs are supported.');
     } else {
         alert('The File APIs are not fully supported in this browser.');
     }

     document.getElementById('files').addEventListener('change', onchange, false);

     // Set background map
 	var map = L.map('mapid').setView([63.305, 10.41], 8);

 	L.tileLayer('api.mapbox.com/styles/v1/sdeisz/cjn34v557132q2rpekt69ygm4/wmts?access_token=pk.eyJ1Ijoic2RlaXN6IiwiYSI6ImNqY2tnb2I2MjBwNTUzM3BnbHpsOXJvcXMifQ.OobHveMvjS38PDfcHpXJDw').addTo(map);

     var southWest = L.latLng(63.18, 10.02),
         northEast = L.latLng(63.43, 10.8);
     var bounds = L.latLngBounds(southWest, northEast);

     map.setMaxBounds(bounds);
     map.on('drag', function() {
         map.panInsideBounds(bounds, { animate: false });
     });

     map.setMinZoom( map.getBoundsZoom( map.options.maxBounds ) );
     map.options.maxZoom = 10;

     var waterLayer = new L.GeoJSON.AJAX("data/Water.geojson");
     waterLayer.addTo(map);

     var oceanLayer = new L.GeoJSON.AJAX("data/Ocean.geojson");
     oceanLayer.addTo(map);

     var landLayer = new L.GeoJSON.AJAX("data/Land.geojson");
     landLayer.addTo(map);

 	var onchange = function(e){
 	    var files = e.target.files;
 	    var shpFile;
 	    var dbfFile;
 	    for (i = 0; i < files.length; i++) {
 	        if (getFileExtension(files[i].name) == "shp") {
 	            shpFile = files[i];
            } else if (getFileExtension(files[i].name) == "dbf") {
 	            dbfFile = files[i];
            }
        } if (shpFile && dbfFile) {
 	        shapefile = new Shapefile({shp: shpFile, dbf: dbfFile} , function (data) {
 	            console.log(data);
                //var features = parser.read(data.geojson);
                //layer.addData(features);
            });
        }
    };

 </script>

</body>
</html>